@page "/listarelementos"
@rendermode InteractiveServer 
@attribute [Authorize]
@inject IElementoStateService ElementoServicio

<h3>En esta page se listan elementos</h3>

<table class="table table-hover align-middle">
	<thead class="table-light">
		<tr>
			<th>Elemento</th>
			<th class="text-end">Acciones</th>
		</tr>
	</thead>
	<tbody>
			@for (int i = 0; i < ElementoServicio.Elementos.Count; i++)
			{
				var indexActual = i;
				<tr>
				@if (indiceElementoEdit == indexActual)
				{

					//Edicion Mode

					<td>
						<input @bind="valorEditado" class="form-control" />
					</td>
					<td class="text-end">
						<div class="d-flex justify-content-end gap-2">
						<button class="btn btn-sm btn-success" @onclick="() => GuardarCambios(indexActual)">Guardar</button>
						<button class="btn btn-sm btn-secondary" @onclick="CancelarEdicion">Cancelar</button>
						</div>
					</td>
				}
				else
				{
					<td>
						@ElementoServicio.Elementos[indexActual]
					</td>
					<td class="text-end">
						<button class="btn btn-sm btn-primary" @onclick="() => IniciarEdicion(indexActual)">Editar</button>
					</td>
				}
				</tr>
			}
	</tbody>
</table>
<br />
@* 
<ul>
	@foreach (var elemento in ElementoServicio.Elementos)
	{
		<li>@elemento</li>
	}
</ul> *@
<div class="d-flex gap-2 mt-3">
	<input type="text" @bind="nuevoElemento" @onkeyup="HandleKeyUp" placeholder="Nuevo elemento..."/>
	<button @onclick="AgregarElemento">Agregar</button>
</div>
<br>
<div class="mt-4">
<WebAppBach.Components.Layout.ContadorElementos></WebAppBach.Components.Layout.ContadorElementos>
</div>